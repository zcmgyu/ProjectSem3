@model List<ProjectSem3.Models.CartItem>
@{
    decimal? totalPrice = 0;
    var itemCount = 0;
    if (Model != null) {
        itemCount = Model.Count;
    }
}
<div class="total-cart">
    <ul>
        <li>
            <a href="#">
                <span class="total-cart-number">@itemCount Item</span>
                <span><i class="sp-shopping-bag"></i></span>
            </a>
            <!-- Mini-cart-content Start -->

            @{
                if (Model != null)
                {
                    <div class="total-cart-brief">
                        @foreach (var item in Model)
                        {
                            var actualPrice = item.Product.PromotionPrice ?? item.Product.Price;
                            <div class="cart-photo-details">
                                <div class="cart-photo">
                                    <a href="#"><img src="@Url.Content(item.Product.Image)" alt="" /></a>
                                </div>
                                <div class="cart-photo-brief">
                                    <a href="#">@item.Product.Name</a>
                                    <span>| @item.Color | @item.Size | @item.Quantity | $@actualPrice |</span>
                                </div>
                                <div class="pro-delete">
                                    <a href="#"><i class="sp-circle-close"></i></a>
                                </div>
                            </div>
                            totalPrice += (item.Quantity * actualPrice);
                        }
                        <div class="cart-subtotal">
                            <p>Total = $@totalPrice</p>
                        </div>
                        <div class="cart-inner-btm">
                            <a href="/Cart/Index">view bag</a>
                        </div>
                    </div>
                }
            }
            <!-- Mini-cart-content End -->
        </li>
    </ul>
</div>
